Compiling 12 files with Solc 0.5.16
Compiling 12 files with Solc 0.6.6
Compiling 54 files with Solc 0.8.20
Solc 0.5.16 finished in 231.11ms
Solc 0.6.6 finished in 337.73ms
Solc 0.8.20 finished in 7.27s
Compiler run successful with warnings:
Warning: Contract code size exceeds 24576 bytes (a limit introduced in Spurious Dragon). This contract may not be deployable on mainnet. Consider enabling the optimizer (with a low "runs" value!), turning off revert strings, or using libraries.
lib/v2-periphery/contracts/UniswapV2Router02.sol:12:1: Warning: Contract code size exceeds 24576 bytes (a limit introduced in Spurious Dragon). This contract may not be deployable on mainnet. Consider enabling the optimizer (with a low "runs" value!), turning off revert strings, or using libraries.
contract UniswapV2Router02 is IUniswapV2Router02 {
^ (Relevant source part starts here and spans across multiple lines).
Analysing contracts...
Running tests...

Ran 1 test for script/Interactions.s.sol:DistributeRewardsStateful
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 462.60µs (133.70µs CPU time)

Ran 1 test for script/Interactions.s.sol:FullyStakeRayFiUsersMultipleVaults
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 339.70µs (85.80µs CPU time)

Ran 1 test for script/Interactions.s.sol:PartiallyStakeRayFiUsersMultipleVaults
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 422.50µs (123.80µs CPU time)

Ran 1 test for script/Interactions.s.sol:AddMockRayFiVaults
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 1.06ms (73.40µs CPU time)

Ran 1 test for script/DeployRayFi.s.sol:DeployRayFi
[PASS] test() (gas: 144)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 1.53ms (89.60µs CPU time)

Ran 1 test for script/Interactions.s.sol:CreateRayFiLiquidityPool
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 937.90µs (80.30µs CPU time)

Ran 1 test for script/Interactions.s.sol:FullyStakeRayFiUsersSingleVault
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 314.40µs (91.60µs CPU time)

Ran 1 test for script/Interactions.s.sol:DistributeRewardsStateless
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 411.50µs (117.70µs CPU time)

Ran 1 test for script/Interactions.s.sol:FundRayFi
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 359.30µs (102.90µs CPU time)

Ran 1 test for script/Interactions.s.sol:CreateRayFiUsers
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 299.40µs (68.50µs CPU time)

Ran 1 test for script/Interactions.s.sol:PartiallyStakeRayFiUsersSingleVault
[PASS] test() (gas: 166)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 368.30µs (108.20µs CPU time)

Ran 1 test for test/mocks/MockETH.sol:MockETH
[PASS] test() (gas: 254)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 393.70µs (91.40µs CPU time)

Ran 1 test for test/mocks/MockUSDT.sol:MockUSDT
[PASS] test() (gas: 254)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 409.50µs (112.70µs CPU time)

Ran 1 test for script/HelperConfig.s.sol:HelperConfig
[PASS] test() (gas: 188)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 11.19ms (126.30µs CPU time)

Ran 1 test for test/mocks/MockBNB.sol:MockBNB
[PASS] test() (gas: 254)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 412.20µs (96.30µs CPU time)

Ran 1 test for test/mocks/MockBTCB.sol:MockBTCB
[PASS] test() (gas: 254)
Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 342.80µs (72.10µs CPU time)

Ran 55 tests for test/unit/RayFiTest.t.sol:RayFiTest
[PASS] testCanRetrieveBNBFromContract() (gas: 47396)
[PASS] testCanRetrieveERC20FromContract() (gas: 57320)
[PASS] testCannotAddExistingVaults() (gas: 66532)
[PASS] testCannotAddOrRemoveVaultsDuringDistributions() (gas: 16846350)
[PASS] testCannotAddZeroAddressVaults() (gas: 14603)
[PASS] testCannotRemoveInexistentVaults() (gas: 15021)
[PASS] testCannotRetrieveRayFiFromContract() (gas: 13172)
[PASS] testCannotRetrieveToZeroAddress() (gas: 20487)
[PASS] testCannotTransferToRayFiContract() (gas: 10882)
[PASS] testDistributionToSpecificVaultWorks() (gas: 2935201)
[PASS] testERC20WasInitializedCorrectly() (gas: 25279)
[PASS] testEmptyVaultsDoNotBreakDistribution() (gas: 2937823)
[PASS] testOnlyOwnerCanStartDistribution() (gas: 12373)
[PASS] testRayFiWasInitializedCorrectly() (gas: 31700)
[PASS] testReinvetmentWithNonZeroSlippageWorks() (gas: 2928435)
[PASS] testRevertsOnZeroAddressArguments() (gas: 139051)
[PASS] testSetFeeAmounts() (gas: 36295)
[PASS] testSetFeeReceiver() (gas: 36278)
[PASS] testSetIsExcludedFromRewards() (gas: 570397)
[PASS] testSetMinimumTokenBalanceForRewards() (gas: 46740)
[PASS] testSetRewardToken() (gas: 36175)
[PASS] testSetRouter() (gas: 34223)
[PASS] testSetSwapReceiver() (gas: 34094)
[PASS] testStakingIsDisabledDuringDistribution() (gas: 19677029)
[PASS] testStakingRevertsOnInexistentVault() (gas: 43786)
[PASS] testStakingRevertsOnInsufficientBalance() (gas: 243653)
[PASS] testStakingRevertsOnInsufficientInput() (gas: 41543)
[PASS] testStatefulDistributionAndReinvestmentWorksForMultipleUsers() (gas: 42459407)
[PASS] testStatefulDistributionEmitsEvents() (gas: 135097)
[PASS] testStatefulDistributionWorksForMultipleUsers() (gas: 20100877)
[PASS] testStatefulReinvestmentWorksForMultipleUsers() (gas: 34753093)
[PASS] testStatelessDistributionAndReinvestmentWorksForMultipleUsers() (gas: 41487153)
[PASS] testStatelessDistributionEmitsEvents() (gas: 124315)
[PASS] testStatelessDistributionRevertsIfStatefulDistributionIsInProgress() (gas: 16844565)
[PASS] testStatelessDistributionWorksForMultipleUsers() (gas: 19755236)
[PASS] testStatelessReinvestmentEmitsEvents() (gas: 2944226)
[PASS] testStatelessReinvestmentWorksForMultipleUsers() (gas: 34180571)
[PASS] testSwapsTakeFees() (gas: 2551536)
[PASS] testSwapsWork() (gas: 2503805)
[PASS] testTradingFeesRemovalWorks() (gas: 212818)
[PASS] testTransferDuringStatefulDistributionAndReinvestmentForMultipleUsers() (gas: 43107156)
[PASS] testTransferFromRevertsWhenInsufficientAllowance() (gas: 16061)
[PASS] testTransferFromWorksAndTakesFees() (gas: 261820)
[PASS] testTransferRevertsWhenInsufficientBalance() (gas: 27646)
[PASS] testTransferRevertsWhenInvalidReceiver() (gas: 10519)
[PASS] testTransferRevertsWhenInvalidSender() (gas: 14415)
[PASS] testTransferToFeeExemptAddressWorks() (gas: 250290)
[PASS] testTransferWorksAfterPermanentlyDisablingTradingFees() (gas: 215163)
[PASS] testTransferWorksAndTakesFees() (gas: 254087)
[PASS] testTransfersUpdateShareholdersSet() (gas: 254367)
[PASS] testUnstakingRevertsOnInsufficientStakedBalance() (gas: 483139)
[PASS] testUsersCanStake() (gas: 370944)
[PASS] testUsersCanUnstake() (gas: 662484)
[PASS] testVaultsCanBeAdded() (gas: 363586)
[PASS] testVaultsCanBeRemoved() (gas: 31219120)
Suite result: ok. 55 passed; 0 failed; 0 skipped; finished in 1.84s (2.66s CPU time)

Ran 6 tests for test/fuzz/RayFiFuzz.t.sol:Fuzz
[PASS] testFuzz_cannotStakeMoreThanOwned(uint256) (runs: 256, μ: 14470, ~: 14580)
[PASS] testFuzz_cannotTransferFromMoreThanAllowed(address,uint256) (runs: 256, μ: 12987, ~: 13281)
[PASS] testFuzz_cannotTransferMoreThanOwned(uint256) (runs: 256, μ: 24871, ~: 24957)
[PASS] testFuzz_cannotUnstakeMoreThanOwned(uint256) (runs: 256, μ: 14512, ~: 14623)
[PASS] testFuzz_sumsArePreservedOnStaking(uint256) (runs: 256, μ: 383489, ~: 383675)
[PASS] testFuzz_sumsArePreservedOnTransfers(address,uint256) (runs: 256, μ: 239820, ~: 189806)
Suite result: ok. 6 passed; 0 failed; 0 skipped; finished in 2.32s (4.28s CPU time)

Ran 15 tests for test/integration/Interactions.t.sol:InteractionsTest
[PASS] testAddMockRayFiVaults() (gas: 20897150)
[PASS] testCreateRayFiLiquidityPool() (gas: 16380538)
[PASS] testCreateRayFiUsers() (gas: 17343470)
[PASS] testDistributionNoVaults() (gas: 22050040)
[PASS] testDistributionOnlyMultipleVaults() (gas: 122277552)
[PASS] testDistributionOnlySingleVault() (gas: 51896419)
[PASS] testFullyStakeRayFiUsersMultipleVaults() (gas: 91060406)
[PASS] testFullyStakeRayFiUsersSingleVault() (gas: 30395361)
[PASS] testFundRayFi() (gas: 1484901)
[PASS] testMixedDistributionMultipleVaultsStateful() (gas: 131841212)
[PASS] testMixedDistributionMultipleVaultsStateless() (gas: 129312447)
[PASS] testMixedDistributionSingleVault() (gas: 59186675)
[PASS] testMultipleDistributionsNoVaultsStateful() (gas: 51868723)
[PASS] testPartiallyStakeRayFiUsersMultipleVaults() (gas: 94868853)
[PASS] testPartiallyStakeRayFiUsersSingleVault() (gas: 34415355)
Suite result: ok. 15 passed; 0 failed; 0 skipped; finished in 54.63s (4.70s CPU time)

Ran 3 tests for test/fuzz/RayFiInvariants.t.sol:Invariants
[PASS] invariant_gettersShouldNotRevert() (runs: 256, calls: 3840, reverts: 180)
[PASS] invariant_protocolShouldHaveMoreSupplyThanSharesAndMoreTotalThanStakedShares() (runs: 256, calls: 3840, reverts: 191)
[PASS] test() (gas: 210)
Suite result: ok. 3 passed; 0 failed; 0 skipped; finished in 61.27s (114.62s CPU time)

Ran 20 test suites in 61.30s (120.09s CPU time): 95 tests passed, 0 failed, 0 skipped (95 total tests)
| File          | % Lines           | % Statements      | % Branches       | % Funcs         |
|---------------|-------------------|-------------------|------------------|-----------------|
| src/RayFi.sol | 100.00% (362/362) | 100.00% (453/453) | 88.28% (113/128) | 100.00% (55/55) |
| Total         | 100.00% (362/362) | 100.00% (453/453) | 88.28% (113/128) | 100.00% (55/55) |
